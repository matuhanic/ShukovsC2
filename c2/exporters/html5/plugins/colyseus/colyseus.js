var Colyseus=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,e,r){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=72)}([function(t,e,r){function n(t){return"string"==typeof t?a.call(this,t):u(this).from(t)}function i(t){return u(this).alloc(t)}function o(t,r){function n(t){r+=t.length}function o(t){u+=w.copy.call(t,a,u)}r||(r=0,Array.prototype.forEach.call(t,n));var s=this!==e&&this||t[0],a=i.call(s,r),u=0;return Array.prototype.forEach.call(t,o),a}function s(t){return t instanceof ArrayBuffer||E(t)}function a(t){var e=3*t.length,r=i.call(this,e),n=w.write.call(r,t);return e!==n&&(r=w.slice.call(r,0,n)),r}function u(t){return d(t)?b:v(t)?m:y(t)?g:l?b:p?m:g}function f(){return!1}function c(t,e){return t="[object "+t+"]",function(r){return null!=r&&{}.toString.call(e?r[e]:r)===t}}var h=e.global=r(44),l=e.hasBuffer=h&&!!h.isBuffer,p=e.hasArrayBuffer="undefined"!=typeof ArrayBuffer,y=e.isArray=r(2);e.isArrayBuffer=p?s:f;var d=e.isBuffer=l?h.isBuffer:f,v=e.isView=p?ArrayBuffer.isView||c("ArrayBuffer","buffer"):f;e.alloc=i,e.concat=o,e.from=n;var g=e.Array=r(46),b=e.Buffer=r(47),m=e.Uint8Array=r(48),w=e.prototype=r(10),E=c("ArrayBuffer")},function(t,e,r){(function(t,n){function i(t,r){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&e._extend(n,r),E(n.showHidden)&&(n.showHidden=!1),E(n.depth)&&(n.depth=2),E(n.colors)&&(n.colors=!1),E(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function u(t,r,n){if(t.customInspect&&r&&S(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return m(i)||(i=u(t,i,n)),i}var o=f(t,r);if(o)return o;var s=Object.keys(r),d=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),k(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(r);if(0===s.length){if(S(r)){var v=r.name?": "+r.name:"";return t.stylize("[Function"+v+"]","special")}if(_(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return t.stylize(Date.prototype.toString.call(r),"date");if(k(r))return c(r)}var g="",b=!1,w=["{","}"];if(y(r)&&(b=!0,w=["[","]"]),S(r)){var E=r.name?": "+r.name:"";g=" [Function"+E+"]"}if(_(r)&&(g=" "+RegExp.prototype.toString.call(r)),x(r)&&(g=" "+Date.prototype.toUTCString.call(r)),k(r)&&(g=" "+c(r)),0===s.length&&(!b||0==r.length))return w[0]+g+w[1];if(n<0)return _(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special");t.seen.push(r);var A;return A=b?h(t,r,n,d,s):s.map(function(e){return l(t,r,n,d,e,b)}),t.seen.pop(),p(A,g,w)}function f(t,e){if(E(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return b(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)I(e,String(s))?o.push(l(t,e,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,r,n,i,!0))}),o}function l(t,e,r,n,i,o){var s,a,f;if(f=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},f.get?a=f.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):f.set&&(a=t.stylize("[Setter]","special")),I(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(f.value)<0?(a=v(r)?u(t,f.value,null):u(t,f.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),E(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function y(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function g(t){return null==t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function E(t){return void 0===t}function _(t){return A(t)&&"[object RegExp]"===B(t)}function A(t){return"object"==typeof t&&null!==t}function x(t){return A(t)&&"[object Date]"===B(t)}function k(t){return A(t)&&("[object Error]"===B(t)||t instanceof Error)}function S(t){return"function"==typeof t}function P(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function B(t){return Object.prototype.toString.call(t)}function O(t){return t<10?"0"+t.toString(10):t.toString(10)}function R(){var t=new Date,e=[O(t.getHours()),O(t.getMinutes()),O(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],e].join(" ")}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var T=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(T,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),a=n[r];r<o;a=n[++r])s+=v(a)||!A(a)?" "+a:" "+i(a);return s},e.deprecate=function(r,i){function o(){if(!s){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),s=!0}return r.apply(this,arguments)}if(E(t.process))return function(){return e.deprecate(r,i).apply(this,arguments)};if(n.noDeprecation===!0)return r;var s=!1;return o};var C,U={};e.debuglog=function(t){if(E(C)&&(C=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!U[t])if(new RegExp("\\b"+t+"\\b","i").test(C)){var r=n.pid;U[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else U[t]=function(){};return U[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=y,e.isBoolean=d,e.isNull=v,e.isNullOrUndefined=g,e.isNumber=b,e.isString=m,e.isSymbol=w,e.isUndefined=E,e.isRegExp=_,e.isObject=A,e.isDate=x,e.isError=k,e.isFunction=S,e.isPrimitive=P,e.isBuffer=r(70);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",R(),e.format.apply(e,arguments))},e.inherits=r(69),e._extend=function(t,e){if(!e||!A(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(e,r(33),r(60))},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){function n(t){return this instanceof n?(this.options=t,void this.init()):new n(t)}function i(t){for(var e in t)n.prototype[e]=o(n.prototype[e],t[e])}function o(t,e){function r(){return t.apply(this,arguments),e.apply(this,arguments)}return t&&e?r:t||e}function s(t){function e(t,e){return e(t)}return t=t.slice(),function(r){return t.reduce(e,r)}}function a(t){return f(t)?s(t):t}function u(t){return new n(t)}var f=r(2);e.createCodec=u,e.install=i,e.filter=a;var c=r(0);n.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=c.Uint8Array),this},e.preset=u({preset:!0})},function(t,e){"use strict";var r=function(){function t(t,e,r,n){void 0===r&&(r=!1),void 0===n&&(n=0),this._enabled=!0,this._once=!1,this._priority=0,this._listener=t,this._once=r,this._signal=e,this._priority=n,this.verifyListener(t)}return t.prototype.execute0=function(){if(this._enabled)return this._once&&this.remove(),this._params&&this._params.length?void this._listener.apply(null,this._params):void this._listener()},t.prototype.execute1=function(t){if(this._enabled)return this._once&&this.remove(),this._params&&this._params.length?void this._listener.apply(null,[t].concat(this._params)):void this._listener(t)},t.prototype.execute=function(t){if(this._enabled){this._once&&this.remove(),this._params&&this._params.length&&(t=t.concat(this._params));var e=t.length;0==e?this._listener():1==e?this._listener(t[0]):2==e?this._listener(t[0],t[1]):3==e?this._listener(t[0],t[1],t[2]):this._listener.apply(null,t)}},Object.defineProperty(t.prototype,"listener",{get:function(){return this._listener},set:function(t){if(null==t)throw new Error("Given listener is null.\nDid you want to set enabled to false instead?");this.verifyListener(t),this._listener=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"once",{get:function(){return this._once},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"[Slot listener: "+this._listener+", once: "+this._once+", priority: "+this._priority+", enabled: "+this._enabled+"]"},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this._params},set:function(t){this._params=t},enumerable:!0,configurable:!0}),t.prototype.remove=function(){this._signal.remove(this._listener)},t.prototype.verifyListener=function(t){if(null==t)throw new Error("Given listener is null.");if(null==this._signal)throw new Error("Internal signal reference has not been set yet.")},t}();e.Slot=r},function(t,e){"use strict";var r;!function(t){t[t.USER_ID=1]="USER_ID",t[t.JOIN_ROOM=10]="JOIN_ROOM",t[t.JOIN_ERROR=11]="JOIN_ERROR",t[t.LEAVE_ROOM=12]="LEAVE_ROOM",t[t.ROOM_DATA=13]="ROOM_DATA",t[t.ROOM_STATE=14]="ROOM_STATE",t[t.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",t[t.BAD_REQUEST=50]="BAD_REQUEST"}(r=e.Protocol||(e.Protocol={}))},function(t,e,r){"use strict";(function(t,n){function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,r){if(o()<r)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(r),e.__proto__=t.prototype):(null===e&&(e=new t(r)),e.length=r),e}function t(e,r,n){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,r,n);if("number"==typeof e){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,r,n)}function a(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,r,n):"string"==typeof e?h(t,e,r):y(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,r,n){return u(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}function c(e,r){if(u(r),e=s(e,r<0?0:0|d(r)),!t.TYPED_ARRAY_SUPPORT)for(var n=0;n<r;++n)e[n]=0;return e}function h(e,r,n){if("string"==typeof n&&""!==n||(n="utf8"),!t.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|g(r,n);e=s(e,i);var o=e.write(r,n);return o!==i&&(e=e.slice(0,o)),e}function l(t,e){var r=e.length<0?0:0|d(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(e,r,n,i){if(r.byteLength,n<0||r.byteLength<n)throw new RangeError("'offset' is out of bounds");if(r.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return r=void 0===n&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,n):new Uint8Array(r,n,i),t.TYPED_ARRAY_SUPPORT?(e=r,e.__proto__=t.prototype):e=l(e,r),e}function y(e,r){if(t.isBuffer(r)){var n=0|d(r.length);return e=s(e,n),0===e.length?e:(r.copy(e,0,0,n),e)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||Z(r.length)?s(e,0):l(e,r);if("Buffer"===r.type&&K(r.data))return l(e,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function v(e){return+e!=e&&(e=0),t.alloc(+e)}function g(e,r){if(t.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(i)return V(e).length;r=(""+r).toLowerCase(),i=!0}}function b(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,r);case"utf8":case"utf-8":return O(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return T(this,e,r);case"base64":return B(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function w(e,r,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=t.from(r,i)),t.isBuffer(r))return 0===r.length?-1:E(e,r,n,i,o);if("number"==typeof r)return r&=255,t.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):E(e,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function E(t,e,r,n,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}var f;if(i){var c=-1;for(f=r;f<a;f++)if(o(t,f)===o(e,c===-1?0:f-c)){if(c===-1&&(c=f),f-c+1===u)return c*s}else c!==-1&&(f-=f-c),c=-1}else for(r+u>a&&(r=a-u),f=r;f>=0;f--){for(var h=!0,l=0;l<u;l++)if(o(t,f+l)!==o(e,l)){h=!1;break}if(h)return f}return-1}function _(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function A(t,e,r,n){return q(V(e,t.length-r),t,r,n)}function x(t,e,r,n){return q(W(e),t,r,n)}function k(t,e,r,n){return x(t,e,r,n)}function S(t,e,r,n){return q($(e),t,r,n)}function P(t,e,r,n){return q(H(e,t.length-r),t,r,n)}function B(t,e,r){return 0===e&&r===t.length?Q.fromByteArray(t):Q.fromByteArray(t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,f,c,h;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[i+1],128===(192&u)&&(h=(31&o)<<6|63&u,h>127&&(s=h));break;case 3:u=t[i+1],f=t[i+2],128===(192&u)&&128===(192&f)&&(h=(15&o)<<12|(63&u)<<6|63&f,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:u=t[i+1],f=t[i+2],c=t[i+3],128===(192&u)&&128===(192&f)&&128===(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&f)<<6|63&c,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return R(n)}function R(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=tt));return r}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function C(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=G(t[o]);return i}function U(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function D(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,r,n,i,o,s){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function N(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function M(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function j(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Y(t,e,r,n,i){return i||j(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,r,n,23,4),r+4}function F(t,e,r,n,i){return i||j(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,r,n,52,8),r+8}function z(t){if(t=J(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function H(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function $(t){return Q.toByteArray(z(t))}function q(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Z(t){return t!==t}var Q=r(38),X=r(8),K=r(2);e.Buffer=t,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:i(),e.kMaxLength=o(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(t,e,r){return a(null,t,e,r)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(t,e,r){return f(null,t,e,r)},t.allocUnsafe=function(t){return c(null,t)},t.allocUnsafeSlow=function(t){return c(null,t)},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,r){if(!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!K(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=t.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!t.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},t.byteLength=g,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):b.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,r,n,i,o){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var s=o-i,a=n-r,u=Math.min(s,a),f=this.slice(i,o),c=e.slice(r,n),h=0;h<u;++h)if(f[h]!==c[h]){s=f[h],a=c[h];break}return s<a?-1:a<s?1:0},t.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},t.prototype.indexOf=function(t,e,r){return w(this,t,e,r,!0)},t.prototype.lastIndexOf=function(t,e,r){return w(this,t,e,r,!1)},t.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,t,e,r);case"utf8":case"utf-8":return A(this,t,e,r);case"ascii":return x(this,t,e,r);case"latin1":case"binary":return k(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;t.prototype.slice=function(e,r){var n=this.length;e=~~e,r=void 0===r?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(t.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=t.prototype;else{var o=r-e;i=new t(o,void 0);for(var s=0;s<o;++s)i[s]=this[s+e]}return i},t.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||D(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},t.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||D(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},t.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||D(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},t.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||D(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),X.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),X.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),X.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),X.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;L(this,t,e,r,i,0)}var o=1,s=0;for(this[e]=255&t;++s<r&&(o*=256);)this[e+s]=t/o&255;return e+r},t.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;L(this,t,e,r,i,0)}var o=r-1,s=1;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+r},t.prototype.writeUInt8=function(e,r,n){return e=+e,r|=0,n||L(this,e,r,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},t.prototype.writeUInt16LE=function(e,r,n){return e=+e,r|=0,n||L(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):N(this,e,r,!0),r+2},t.prototype.writeUInt16BE=function(e,r,n){return e=+e,r|=0,n||L(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):N(this,e,r,!1),r+2},t.prototype.writeUInt32LE=function(e,r,n){return e=+e,r|=0,n||L(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):M(this,e,r,!0),r+4},t.prototype.writeUInt32BE=function(e,r,n){return e=+e,r|=0,n||L(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):M(this,e,r,!1),r+4},t.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},t.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},t.prototype.writeInt8=function(e,r,n){return e=+e,r|=0,n||L(this,e,r,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},t.prototype.writeInt16LE=function(e,r,n){return e=+e,r|=0,n||L(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):N(this,e,r,!0),r+2},t.prototype.writeInt16BE=function(e,r,n){return e=+e,r|=0,n||L(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):N(this,e,r,!1),r+2},t.prototype.writeInt32LE=function(e,r,n){return e=+e,r|=0,n||L(this,e,r,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):M(this,e,r,!0),r+4},t.prototype.writeInt32BE=function(e,r,n){return e=+e,r|=0,n||L(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):M(this,e,r,!1),r+4},t.prototype.writeFloatLE=function(t,e,r){return Y(this,t,e,!0,r)},t.prototype.writeFloatBE=function(t,e,r){return Y(this,t,e,!1,r)},t.prototype.writeDoubleLE=function(t,e,r){return F(this,t,e,!0,r)},t.prototype.writeDoubleBE=function(t,e,r){return F(this,t,e,!1,r)},t.prototype.copy=function(e,r,n,i){if(n||(n=0),i||0===i||(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o,s=i-n;if(this===e&&n<r&&r<i)for(o=s-1;o>=0;--o)e[o+r]=this[o+n];else if(s<1e3||!t.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+r]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),r);return s},t.prototype.fill=function(e,r,n,i){if("string"==typeof e){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=r;s<n;++s)this[s]=e;else{var a=t.isBuffer(e)?e:V(new t(e,i).toString()),u=a.length;for(s=0;s<n-r;++s)this[s+r]=a[s%u]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,r(6).Buffer,r(33))},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,a,u,f;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r=this._events[t],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(o(r))for(a=Array.prototype.slice.call(arguments,1),f=r.slice(),i=f.length,u=0;u<i;u++)f[u].apply(this,a);return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");
return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],s=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(a=s;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){i=a;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,c=-7,h=r?i-1:0,l=r?-1:1,p=t[e+h];for(h+=l,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=l,c-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,n),o-=f}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,f=8*o-i-1,c=(1<<f)-1,h=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?l/u:l*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=y,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+p]=255&s,p+=y,s/=256,f-=8);t[r+p-y]|=128*d}},function(t,e,r){(function(t){var r,n,i,o;!function(e){function s(t,r,n){function i(t,e,r,n){return this instanceof i?s(this,t,e,r,n):new i(t,e,r,n)}function o(t){return!(!t||!t[Y])}function s(t,e,r,n,i){if(E&&_&&(e instanceof _&&(e=new E(e)),n instanceof _&&(n=new E(n))),!(e||r||n||b))return void(t.buffer=l(A,0));if(!c(e,r)){var o=b||Array;i=r,n=e,r=0,e=new o(8)}t.buffer=e,t.offset=r|=0,m!==typeof n&&("string"==typeof n?g(e,r,n,i||10):c(n,i)?h(e,r,n,i):"number"==typeof i?(B(e,r+R,n),B(e,r+I,i)):n>0?L(e,r,n):n<0?N(e,r,n):h(e,r,A,0))}function g(t,e,r,n){var i=0,o=r.length,s=0,a=0;"-"===r[0]&&i++;for(var u=i;i<o;){var f=parseInt(r[i++],n);if(!(f>=0))break;a=a*n+f,s=s*n+Math.floor(a/k),a%=k}u&&(s=~s,a?a=k-a:s++),B(t,e+R,s),B(t,e+I,a)}function x(){var t=this.buffer,e=this.offset,r=O(t,e+R),i=O(t,e+I);return n||(r|=0),r?r*k+i:i}function P(t){var e=this.buffer,r=this.offset,i=O(e,r+R),o=O(e,r+I),s="",a=!n&&2147483648&i;for(a&&(i=~i,o=k-o),t=t||10;;){var u=i%t*k+o;if(i=Math.floor(i/t),o=Math.floor(u/t),s=(u%t).toString(t)+s,!i&&!o)break}return a&&(s="-"+s),s}function B(t,e,r){t[e+D]=255&r,r>>=8,t[e+U]=255&r,r>>=8,t[e+C]=255&r,r>>=8,t[e+T]=255&r}function O(t,e){return t[e+T]*S+(t[e+C]<<16)+(t[e+U]<<8)+t[e+D]}var R=r?0:4,I=r?4:0,T=r?0:3,C=r?1:2,U=r?2:1,D=r?3:0,L=r?p:d,N=r?y:v,M=i.prototype,j="is"+t,Y="_"+j;return M.buffer=void 0,M.offset=0,M[Y]=!0,M.toNumber=x,M.toString=P,M.toJSON=x,M.toArray=a,w&&(M.toBuffer=u),E&&(M.toArrayBuffer=f),i[j]=o,e[t]=i,i}function a(t){var e=this.buffer,r=this.offset;return b=null,t!==!1&&0===r&&8===e.length&&x(e)?e:l(e,r)}function u(e){var r=this.buffer,n=this.offset;if(b=w,e!==!1&&0===n&&8===r.length&&t.isBuffer(r))return r;var i=new w(8);return h(i,0,r,n),i}function f(t){var e=this.buffer,r=this.offset,n=e.buffer;if(b=E,t!==!1&&0===r&&n instanceof _&&8===n.byteLength)return n;var i=new E(8);return h(i,0,e,r),i.buffer}function c(t,e){var r=t&&t.length;return e|=0,r&&e+8<=r&&"string"!=typeof t[e]}function h(t,e,r,n){e|=0,n|=0;for(var i=0;i<8;i++)t[e++]=255&r[n++]}function l(t,e){return Array.prototype.slice.call(t,e,e+8)}function p(t,e,r){for(var n=e+8;n>e;)t[--n]=255&r,r/=256}function y(t,e,r){var n=e+8;for(r++;n>e;)t[--n]=255&-r^255,r/=256}function d(t,e,r){for(var n=e+8;e<n;)t[e++]=255&r,r/=256}function v(t,e,r){var n=e+8;for(r++;e<n;)t[e++]=255&-r^255,r/=256}function g(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)}var b,m="undefined",w=m!==typeof t&&t,E=m!==typeof Uint8Array&&Uint8Array,_=m!==typeof ArrayBuffer&&ArrayBuffer,A=[0,0,0,0,0,0,0,0],x=Array.isArray||g,k=4294967296,S=16777216;r=s("Uint64BE",!0,!0),n=s("Int64BE",!0,!1),i=s("Uint64LE",!1,!0),o=s("Int64LE",!1,!1)}("object"==typeof e&&"string"!=typeof e.nodeName?e:this||{})}).call(e,r(6).Buffer)},function(t,e,r){function n(t,e,r,n){var o=u.isBuffer(this),s=u.isBuffer(t);if(o&&s)return this.copy(t,e,r,n);if(h||o||s||!u.isView(this)||!u.isView(t))return a.copy.call(this,t,e,r,n);var f=r||null!=n?i.call(this,r,n):this;return t.set(f,e),f.length}function i(t,e){var r=this.slice||!h&&this.subarray;if(r)return r.call(this,t,e);var i=u.alloc.call(this,e-t);return n.call(this,i,0,t,e),i}function o(t,e,r){var n=!c&&u.isBuffer(this)?this.toString:a.toString;return n.apply(this,arguments)}function s(t){function e(){var e=this[t]||a[t];return e.apply(this,arguments)}return e}var a=r(45);e.copy=n,e.slice=i,e.toString=o,e.write=s("write");var u=r(0),f=u.global,c=u.hasBuffer&&"TYPED_ARRAY_SUPPORT"in f,h=c&&!f.TYPED_ARRAY_SUPPORT},function(t,e,r){function n(t,e){return this instanceof n?(this.buffer=i.from(t),void(this.type=e)):new n(t,e)}e.ExtBuffer=n;var i=r(0)},function(t,e,r){function n(t){function e(t){var e=f(t),n=r[e];if(!n)throw new Error("Invalid type: "+(e?"0x"+e.toString(16):e));return n(t)}var r=c.getReadToken(t);return e}function i(){var t=this.options;return this.decode=n(t),t&&t.preset&&u.setExtUnpackers(this),this}function o(t,e){var r=this.extUnpackers||(this.extUnpackers=[]);r[t]=h.filter(e)}function s(t){function e(e){return new a(e,t)}var r=this.extUnpackers||(this.extUnpackers=[]);return r[t]||e}var a=r(11).ExtBuffer,u=r(53),f=r(27).readUint8,c=r(55),h=r(3);h.install({addExtUnpacker:o,getExtUnpacker:s,init:i}),e.preset=i.call(h.preset)},function(t,e,r){function n(t){function e(t,e){var n=r[typeof e];if(!n)throw new Error('Unsupported type "'+typeof e+'": '+e);n(t,e)}var r=f.getWriteType(t);return e}function i(){var t=this.options;return this.encode=n(t),t&&t.preset&&u.setExtPackers(this),this}function o(t,e,r){function n(e){return r&&(e=r(e)),new a(e,t)}r=c.filter(r);var i=e.name;if(i&&"Object"!==i){var o=this.extPackers||(this.extPackers={});o[i]=n}else{var s=this.extEncoderList||(this.extEncoderList=[]);s.unshift([e,n])}}function s(t){var e=this.extPackers||(this.extPackers={}),r=t.constructor,n=r&&r.name&&e[r.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,s=0;s<o;s++){var a=i[s];if(r===a[0])return a[1]}}var a=r(11).ExtBuffer,u=r(52),f=r(57),c=r(3);c.install({addExtPacker:o,getExtPacker:s,init:i}),e.preset=i.call(c.preset)},function(t,e,r){t.exports=r(58)},function(t,e,r){"use strict";var n=r(32),i=r(4),o=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.slots=n.SlotList.NIL,this.valueClasses=1==t.length&&t[0]instanceof Array?t[0]:t}return Object.defineProperty(t.prototype,"valueClasses",{get:function(){return this._valueClasses},set:function(t){this._valueClasses=t?t.slice():[];for(var e=this._valueClasses.length;e--;)if(!(this._valueClasses[e]instanceof Object))throw new Error("Invalid valueClasses argument: item at index "+e+" should be a Class but was:<"+this._valueClasses[e]+">."+this._valueClasses[e])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numListeners",{get:function(){return this.slots.length},enumerable:!0,configurable:!0}),t.prototype.addOnce=function(t){return this.registerListener(t,!0)},t.prototype.remove=function(t){var e=this.slots.find(t);return e?(this.slots=this.slots.filterNot(t),e):null},t.prototype.removeAll=function(){this.slots=n.SlotList.NIL},t.prototype.dispatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this._valueClasses.length,n=t.length;if(n<r)throw new Error("Incorrect number of arguments. Expected at least "+r+" but received "+n+".");for(var i=0;i<r;i++)if(!(null===t[i]||t[i]instanceof this._valueClasses[i]||t[i].constructor===this._valueClasses[i]))throw new Error("Value object <"+t[i]+"> is not an instance of <"+this._valueClasses[i]+">.");var o=this.slots;if(o.nonEmpty)for(;o.nonEmpty;)o.head.execute(t),o=o.tail},t.prototype.registerListener=function(t,e){if(void 0===e&&(e=!1),this.registrationPossible(t,e)){var r=new i.Slot(t,this,e);return this.slots=this.slots.prepend(r),r}return this.slots.find(t)},t.prototype.registrationPossible=function(t,e){if(!this.slots.nonEmpty)return!0;var r=this.slots.find(t);if(!r)return!0;if(r.once!=e)throw new Error("You cannot addOnce() then add() the same listener without removing the relationship first.");return!1},t}();e.OnceSignal=o},function(t,e,r){"use strict";var n=r(29),i=r(39),o=r(42),s=r(21),a=r(43),u=r(5),f=function(){function t(t,e){var r=this;this.state=new o.DeltaContainer({}),this.clock=new i,this.remoteClock=new i,this.onJoin=new n.Signal,this.onUpdate=new n.Signal,this.onData=new n.Signal,this.onError=new n.Signal,this.onLeave=new n.Signal,this.removeAllListeners=function(){r.onJoin.removeAll(),r.onUpdate.removeAll(),r.onData.removeAll(),r.onError.removeAll(),r.onLeave.removeAll(),r.state.removeAllListeners()},this.id=null,this.client=t,this.name=e,this.onLeave.add(this.removeAllListeners)}return t.prototype.setState=function(t,e,r){this.state.set(t),this._previousState=s.encode(t),e&&r&&(this.remoteClock.currentTime=e,this.remoteClock.elapsedTime=r),this.clock.start(),this.onUpdate.dispatch(t)},t.prototype.patch=function(t){var e=Date.now();this.lastPatchTime&&(this.ping=e-this.lastPatchTime),this.lastPatchTime=e,this.clock.tick(),this._previousState=a.apply(this._previousState,t),this.state.set(s.decode(this._previousState)),this.onUpdate.dispatch(this.state.data)},t.prototype.leave=function(){this.id>=0&&this.client.send([u.Protocol.LEAVE_ROOM,this.id])},t.prototype.send=function(t){this.client.send([u.Protocol.ROOM_DATA,this.id,t])},t}();e.Room=f},function(t,e,r){function n(t){i.EventEmitter.call(this),this.backoffStrategy_=t,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}var i=r(7),o=r(14),s=r(1);s.inherits(n,i.EventEmitter),n.prototype.failAfter=function(t){o.checkArgument(t>0,"Expected a maximum number of retry greater than 0 but got %s.",t),this.maxNumberOfRetry_=t},n.prototype.backoff=function(t){o.checkState(this.timeoutID_===-1,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",t),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,t))},n.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},n.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},t.exports=n},function(t,e,r){function n(t){o.call(this,t),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}var i=r(1),o=r(19);i.inherits(n,o),n.prototype.next_=function(){var t=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=t,t},n.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},t.exports=n},function(t,e,r){function n(t){return void 0!==t&&null!==t}function i(t){if(t=t||{},n(t.initialDelay)&&t.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(n(t.maxDelay)&&t.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=t.initialDelay||100,this.maxDelay_=t.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(n(t.randomisationFactor)&&(t.randomisationFactor<0||t.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=t.randomisationFactor||0}r(7),r(1);i.prototype.getMaxDelay=function(){return this.maxDelay_},i.prototype.getInitialDelay=function(){return this.initialDelay_},i.prototype.next=function(){var t=this.next_(),e=1+Math.random()*this.randomisationFactor_,r=Math.round(t*e);return r},i.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},i.prototype.reset=function(){this.reset_()},i.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},t.exports=i},function(t,e,r){function n(){if(!(this instanceof n))return new n}!function(e){function r(t){for(var e in f)t[e]=f[e];return t}function n(t,e){return a(this,t).push(e),this}function i(t,e){function r(){o.call(n,t,r),e.apply(this,arguments)}var n=this;return r.originalListener=e,a(n,t).push(r),n}function o(t,e){function r(t){return t!==e&&t.originalListener!==e}var n,i=this;if(arguments.length){if(e){if(n=a(i,t,!0)){if(n=n.filter(r),!n.length)return o.call(i,t);i[u][t]=n}}else if(n=i[u],n&&(delete n[t],!Object.keys(n).length))return o.call(i)}else delete i[u];return i}function s(t,e){function r(t){t.call(o)}function n(t){t.call(o,e)}function i(t){t.apply(o,f)}var o=this,s=a(o,t,!0);if(!s)return!1;var u=arguments.length;if(1===u)s.forEach(r);else if(2===u)s.forEach(n);else{var f=Array.prototype.slice.call(arguments,1);s.forEach(i)}return!!s.length}function a(t,e,r){if(!r||t[u]){var n=t[u]||(t[u]={});return n[e]||(n[e]=[])}}t.exports=e;var u="listeners",f={on:n,once:i,off:o,emit:s};r(e.prototype),e.mixin=r}(n)},function(t,e,r){e.encode=r(25).encode,e.decode=r(23).decode,e.Encoder=r(51).Encoder,e.Decoder=r(50).Decoder,e.createCodec=r(54).createCodec,e.codec=r(49).codec},function(t,e,r){function n(t){if(!(this instanceof n))return new n(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}e.DecodeBuffer=n;var i=r(12).preset,o=r(26).FlexDecoder;o.mixin(n.prototype),n.prototype.codec=i,n.prototype.fetch=function(){return this.codec.decode(this)}},function(t,e,r){function n(t,e){var r=new i(e);return r.write(t),r.read()}e.decode=n;var i=r(22).DecodeBuffer},function(t,e,r){function n(t){if(!(this instanceof n))return new n(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}e.EncodeBuffer=n;var i=r(13).preset,o=r(26).FlexEncoder;o.mixin(n.prototype),n.prototype.codec=i,n.prototype.write=function(t){this.codec.encode(this,t)}},function(t,e,r){function n(t,e){var r=new i(e);return r.write(t),r.read()}e.encode=n;var i=r(24).EncodeBuffer},function(t,e,r){function n(){if(!(this instanceof n))return new n}function i(){if(!(this instanceof i))return new i}function o(){function t(t){var e=this.offset?p.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0}function e(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=v)throw t;this.offset=e;break}this.push(t)}}function r(t){var e=this.offset,r=e+t;if(r>this.buffer.length)throw new Error(v);return this.offset=r,e}return{bufferish:p,write:t,fetch:u,flush:e,push:c,pull:h,read:f,reserve:r,offset:0}}function s(){function t(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return p.prototype.slice.call(this.buffer,t,e)}}function e(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}}function r(){var t=this.buffers||(this.buffers=[]),e=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,e}function n(t){var e=0|t;if(this.buffer){var r=this.buffer.length,n=0|this.offset,i=n+e;if(i<r)return this.offset=i,n;this.flush(),t=Math.max(t,Math.min(2*r,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0}function i(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var r=this.reserve(e);p.prototype.copy.call(t,this.buffer,r)}}return{bufferish:p,write:a,fetch:t,flush:e,push:c,pull:r,read:f,reserve:n,send:i,maxBufferSize:d,minBufferSize:y,offset:0,start:0}}function a(){throw new Error("method not implemented: write()")}function u(){throw new Error("method not implemented: fetch()")}function f(){var t=this.buffers&&this.buffers.length;return t?(this.flush(),this.pull()):this.fetch()}function c(t){var e=this.buffers||(this.buffers=[]);e.push(t)}function h(){var t=this.buffers||(this.buffers=[]);return t.shift()}function l(t){function e(e){for(var r in t)e[r]=t[r];return e}return e}e.FlexDecoder=n,e.FlexEncoder=i;var p=r(0),y=2048,d=65536,v="BUFFER_SHORTAGE";n.mixin=l(o()),n.mixin(n.prototype),i.mixin=l(s()),i.mixin(i.prototype)},function(t,e,r){function n(t){var e=B.hasArrayBuffer&&t&&t.binarraybuffer,r=t&&t.int64,n=R&&t&&t.usemap,x={map:n?o:i,array:s,str:a,bin:e?f:u,ext:c,uint8:h,uint16:p,uint32:d,uint64:g(8,r?w:b),int8:l,int16:y,int32:v,int64:g(8,r?E:m),float32:g(4,_),float64:g(8,A)};return x}function i(t,e){var r,n={},i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n[i[r]]=o[r];return n}function o(t,e){var r,n=new Map,i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n.set(i[r],o[r]);return n}function s(t,e){for(var r=new Array(e),n=t.codec.decode,i=0;i<e;i++)r[i]=n(t);return r}function a(t,e){var r=t.reserve(e),n=r+e;return O.toString.call(t.buffer,"utf-8",r,n)}function u(t,e){var r=t.reserve(e),n=r+e,i=O.slice.call(t.buffer,r,n);return B.from(i)}function f(t,e){var r=t.reserve(e),n=r+e,i=O.slice.call(t.buffer,r,n);return B.Uint8Array.from(i).buffer}function c(t,e){var r=t.reserve(e+1),n=t.buffer[r++],i=r+e,o=t.codec.getExtUnpacker(n);if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));var s=O.slice.call(t.buffer,r,i);return o(s)}function h(t){var e=t.reserve(1);return t.buffer[e]}function l(t){var e=t.reserve(1),r=t.buffer[e];return 128&r?r-256:r}function p(t){var e=t.reserve(2),r=t.buffer;return r[e++]<<8|r[e]}function y(t){var e=t.reserve(2),r=t.buffer,n=r[e++]<<8|r[e];return 32768&n?n-65536:n}function d(t){var e=t.reserve(4),r=t.buffer;return 16777216*r[e++]+(r[e++]<<16)+(r[e++]<<8)+r[e]}function v(t){var e=t.reserve(4),r=t.buffer;return r[e++]<<24|r[e++]<<16|r[e++]<<8|r[e]}function g(t,e){return function(r){var n=r.reserve(t);return e.call(r.buffer,n,I)}}function b(t){return new S(this,t).toNumber()}function m(t){return new P(this,t).toNumber()}function w(t){return new S(this,t)}function E(t){return new P(this,t)}function _(t){return x.read(this,t,!1,23,4)}function A(t){return x.read(this,t,!1,52,8)}var x=r(8),k=r(9),S=k.Uint64BE,P=k.Int64BE;e.getReadFormat=n,e.readUint8=h;var B=r(0),O=r(10),R="undefined"!=typeof Map,I=!0},function(t,e){function r(t){return function(e){var r=e.reserve(1);e.buffer[r]=t}}for(var n=e.uint8=new Array(256),i=0;i<=255;i++)n[i]=r(i)},function(t,e,r){"use strict";var n=r(61);e.DeluxeSignal=n.DeluxeSignal;var i=r(68);e.GenericEvent=i.GenericEvent;var o=r(62);e.IOnceSignal=o.IOnceSignal;var s=r(63);e.IPrioritySignal=s.IPrioritySignal;var a=r(64);e.ISignal=a.ISignal;var u=r(65);e.ISlot=u.ISlot;var f=r(66);e.MonoSignal=f.MonoSignal;var c=r(15);e.OnceSignal=c.OnceSignal;var h=r(30);e.PrioritySignal=h.PrioritySignal;var l=r(67);e.Promise=l.Promise;var p=r(31);e.Signal=p.Signal;var y=r(4);e.Slot=y.Slot;var d=r(32);e.SlotList=d.SlotList},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(31),o=r(4),s=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n;return e=1==e.length&&e[0]instanceof Array?e[0]:e,n=t.call(this,e)||this}return n(e,t),e.prototype.addWithPriority=function(t,e){return void 0===e&&(e=0),this.registerListenerWithPriority(t,!1,e)},e.prototype.addOnceWithPriority=function(t,e){return void 0===e&&(e=0),this.registerListenerWithPriority(t,!0,e)},e.prototype.registerListener=function(t,e){return void 0===e&&(e=!1),this.registerListenerWithPriority(t,e)},e.prototype.registerListenerWithPriority=function(t,e,r){if(void 0===e&&(e=!1),void 0===r&&(r=0),this.registrationPossible(t,e)){var n=new o.Slot(t,this,e,r);return this.slots=this.slots.insertWithPriority(n),n}return this.slots.find(t)},e}(i.Signal);e.PrioritySignal=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(15),o=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n;return e=1==e.length&&e[0]instanceof Array?e[0]:e,n=t.call(this,e)||this}return n(e,t),e.prototype.add=function(t){return this.registerListener(t)},e}(i.OnceSignal);e.Signal=o},function(t,e){"use strict";var r=function(){function t(e,r){if(void 0===r&&(r=null),this.nonEmpty=!1,e||r){if(!e)throw new Error("Parameter head cannot be null.");this.head=e,this.tail=r||t.NIL,this.nonEmpty=!0}else{if(t.NIL)throw new Error("Parameters head and tail are null. Use the NIL element instead.");this.nonEmpty=!1}}return Object.defineProperty(t.prototype,"length",{get:function(){if(!this.nonEmpty)return 0;if(this.tail==t.NIL)return 1;for(var e=0,r=this;r.nonEmpty;)++e,r=r.tail;return e},enumerable:!0,configurable:!0}),t.prototype.prepend=function(e){return new t(e,this)},t.prototype.append=function(e){if(!e)return this;if(!this.nonEmpty)return new t(e);if(this.tail==t.NIL)return new t(e).prepend(this.head);for(var r=new t(this.head),n=r,i=this.tail;i.nonEmpty;)n=n.tail=new t(i.head),i=i.tail;return n.tail=new t(e),r},t.prototype.insertWithPriority=function(e){if(!this.nonEmpty)return new t(e);var r=e.priority;if(r>this.head.priority)return this.prepend(e);for(var n=new t(this.head),i=n,o=this.tail;o.nonEmpty;){if(r>o.head.priority)return i.tail=o.prepend(e),n;i=i.tail=new t(o.head),o=o.tail}return i.tail=new t(e),n},t.prototype.filterNot=function(e){if(!this.nonEmpty||null==e)return this;if(e==this.head.listener)return this.tail;for(var r=new t(this.head),n=r,i=this.tail;i.nonEmpty;){if(i.head.listener==e)return n.tail=i.tail,r;n=n.tail=new t(i.head),i=i.tail}return this},t.prototype.contains=function(t){if(!this.nonEmpty)return!1;for(var e=this;e.nonEmpty;){if(e.head.listener==t)return!0;e=e.tail}return!1},t.prototype.find=function(t){if(!this.nonEmpty)return null;for(var e=this;e.nonEmpty;){if(e.head.listener==t)return e.head;e=e.tail}return null},t.prototype.toString=function(){for(var t="",e=this;e.nonEmpty;)t+=e.head+" -> ",e=e.tail;return t+="NIL","[List "+t+"]"},t}();r.NIL=new r(null,null),e.SlotList=r},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(71),o=r(21),s=r(5),a=r(16),u=r(29),f=function(t){function e(e,r,n){void 0===r&&(r=null),void 0===n&&(n={});var i=t.call(this,e,r,n)||this;return i.rooms={},i.onOpen=new u.Signal,i.onMessage=new u.Signal,i.onClose=new u.Signal,i.onError=new u.Signal,i._enqueuedCalls=[],i.binaryType="arraybuffer",i}return n(e,t),e.prototype.onOpenCallback=function(t){if(this._enqueuedCalls.length>0)for(var e=0;e<this._enqueuedCalls.length;e++){var r=this._enqueuedCalls[e],n=r[0],i=r[1];this[n].apply(this,i)}},e.prototype.onCloseCallback=function(){this.onClose.dispatch()},e.prototype.onErrorCallback=function(){this.onError.dispatch()},e.prototype.send=function(e){return this.ws.readyState==WebSocket.OPEN?t.prototype.send.call(this,o.encode(e)):void this._enqueuedCalls.push(["send",[e]])},e.prototype.join=function(t,e){return void 0===e&&(e={}),this.rooms[t]||(this.rooms[t]=new a.Room(this,t)),this.send([s.Protocol.JOIN_ROOM,t,e]),this.rooms[t]},e.prototype.onMessageCallback=function(t){var e=o.decode(new Uint8Array(t.data)),r=e[0],n=e[1];if(r==s.Protocol.USER_ID)this.id=n,this.onOpen.dispatch();else if(r==s.Protocol.JOIN_ROOM)this.rooms[e[2]]&&(this.rooms[n]=this.rooms[e[2]],delete this.rooms[e[2]]),this.rooms[n].id=n,this.rooms[n].onJoin.dispatch();else if(r==s.Protocol.JOIN_ERROR){var i=this.rooms[n];console.error("server error:",e[2]),i?i.onError.dispatch(e[2]):this.onError.dispatch(e[2])}else if(r==s.Protocol.LEAVE_ROOM)this.rooms[n].onLeave.dispatch();else if(r==s.Protocol.ROOM_STATE){var a=e[2],u=e[3],f=e[4];this.rooms[n].setState(a,u,f)}else if(r==s.Protocol.ROOM_STATE_PATCH){var c=e[2];this.rooms[n].patch(c)}else r==s.Protocol.ROOM_DATA?(this.rooms[n].onData.dispatch(e[2]),this.onMessage.dispatch(e[2])):this.onMessage.dispatch(e)},e}(i.default);e.Client=f},function(t,e,r){var n=r(17),i=r(37),o=r(18),s=r(36);t.exports.Backoff=n,t.exports.FunctionCall=s,t.exports.FibonacciStrategy=o,t.exports.ExponentialStrategy=i,t.exports.fibonacci=function(t){return new n(new o(t))},t.exports.exponential=function(t){return new n(new i(t))},t.exports.call=function(t,e,r){var n=Array.prototype.slice.call(arguments);return t=n[0],e=n.slice(1,n.length-1),r=n[n.length-1],new s(t,e,r)}},function(t,e,r){function n(t,e,r){i.EventEmitter.call(this),o.checkIsFunction(t,"Expected fn to be a function."),o.checkIsArray(e,"Expected args to be an array."),o.checkIsFunction(r,"Expected callback to be a function."),this.function_=t,this.arguments_=e,this.callback_=r,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=n.DEFAULT_RETRY_PREDICATE_,this.state_=n.State_.PENDING}var i=r(7),o=r(14),s=r(1),a=r(17),u=r(18);s.inherits(n,i.EventEmitter),n.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},n.DEFAULT_RETRY_PREDICATE_=function(t){return!0},n.prototype.isPending=function(){return this.state_==n.State_.PENDING},n.prototype.isRunning=function(){return this.state_==n.State_.RUNNING},n.prototype.isCompleted=function(){return this.state_==n.State_.COMPLETED},n.prototype.isAborted=function(){return this.state_==n.State_.ABORTED},n.prototype.setStrategy=function(t){return o.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=t,this},n.prototype.retryIf=function(t){return o.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=t,this},n.prototype.getLastResult=function(){return this.lastResult_.concat()},n.prototype.getNumRetries=function(){return this.numRetries_},n.prototype.failAfter=function(t){return o.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=t,this},n.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=n.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},n.prototype.start=function(t){o.checkState(!this.isAborted(),"FunctionCall is aborted."),o.checkState(this.isPending(),"FunctionCall already started.");var e=this.strategy_||new u;this.backoff_=t?t(e):new a(e),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=n.State_.RUNNING,this.doCall_(!1)},n.prototype.doCall_=function(t){t&&this.numRetries_++;var e=["call"].concat(this.arguments_);i.EventEmitter.prototype.emit.apply(this,e);var r=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(r))},n.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},n.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var t=Array.prototype.slice.call(arguments);this.lastResult_=t,i.EventEmitter.prototype.emit.apply(this,["callback"].concat(t));var e=t[0];e&&this.retryPredicate_(e)?this.backoff_.backoff(e):(this.state_=n.State_.COMPLETED,this.doCallback_())}},n.prototype.handleBackoff_=function(t,e,r){this.emit("backoff",t,e,r)},t.exports=n},function(t,e,r){function n(t){s.call(this,t),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=n.DEFAULT_FACTOR,t&&void 0!==t.factor&&(o.checkArgument(t.factor>1,"Exponential factor should be greater than 1 but got %s.",t.factor),this.factor_=t.factor)}var i=r(1),o=r(14),s=r(19);i.inherits(n,s),n.DEFAULT_FACTOR=2,n.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},n.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},t.exports=n},function(t,e){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function n(t){return 3*t.length/4-r(t)}function i(t){var e,n,i,o,s,a,u=t.length;s=r(t),a=new c(3*u/4-s),i=s>0?u-4:u;var h=0;for(e=0,n=0;e<i;e+=4,n+=3)o=f[t.charCodeAt(e)]<<18|f[t.charCodeAt(e+1)]<<12|f[t.charCodeAt(e+2)]<<6|f[t.charCodeAt(e+3)],a[h++]=o>>16&255,a[h++]=o>>8&255,a[h++]=255&o;return 2===s?(o=f[t.charCodeAt(e)]<<2|f[t.charCodeAt(e+1)]>>4,a[h++]=255&o):1===s&&(o=f[t.charCodeAt(e)]<<10|f[t.charCodeAt(e+1)]<<4|f[t.charCodeAt(e+2)]>>2,a[h++]=o>>8&255,a[h++]=255&o),a}function o(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function s(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],i.push(o(n));return i.join("")}function a(t){for(var e,r=t.length,n=r%3,i="",o=[],a=16383,f=0,c=r-n;f<c;f+=a)o.push(s(t,f,f+a>c?c:f+a));return 1===n?(e=t[r-1],i+=u[e>>2],i+=u[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=u[e>>10],i+=u[e>>4&63],i+=u[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=n,e.toByteArray=i,e.fromByteArray=a;for(var u=[],f=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,p=h.length;l<p;++l)u[l]=h[l],f[h.charCodeAt(l)]=l;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(t,e){"use strict";var r=function(){function t(t){void 0===t&&(t=!1),this.running=!1,this.deltaTime=0,this.currentTime=0,this.elapsedTime=0,this.now="undefined"!=typeof window&&window.performance&&window.performance.now.bind(window.performance)||Date.now,
this.start(),t&&setInterval(this.tick.bind(this),1e3/60)}return t.prototype.start=function(){this.deltaTime=0,this.currentTime=this.now(),this.elapsedTime=0,this.running=!0},t.prototype.stop=function(){this.running=!1},t.prototype.tick=function(t){void 0===t&&(t=this.now()),this.deltaTime=t-this.currentTime,this.currentTime=t,this.elapsedTime+=this.deltaTime},t}();t.exports=r},function(t,e,r){"use strict";var n=r(41),i=function(){function t(t){this.matcherPlaceholders={":id":/^([a-zA-Z0-9\-_]+)$/,":number":/^([0-9]+)$/,":string":/^(\w+)$/,":axis":/^([xyz])$/,"*":/(.*)/},this.data=t,this.reset()}return t.prototype.set=function(t){var e=n.compare(this.data,t);return this.checkPatches(e),this.data=t,e},t.prototype.registerPlaceholder=function(t,e){this.matcherPlaceholders[t]=e},t.prototype.listen=function(t,e,r){var n,i=this;"function"==typeof t?(n=[],r=t):n=t.split("/");var o={callback:r,operation:e,rules:n.map(function(t){return"string"==typeof t?0===t.indexOf(":")?i.matcherPlaceholders[t]||i.matcherPlaceholders["*"]:new RegExp(t):t})};return this.listeners[e||""].push(o),o},t.prototype.removeListener=function(t){for(var e=this.listeners[t.operation].length-1;e>=0;e--)this.listeners[t.operation][e]===t&&this.listeners[t.operation].splice(e,1)},t.prototype.removeAllListeners=function(){this.reset()},t.prototype.checkPatches=function(t){for(var e=t.length-1;e>=0;e--){for(var r=!1,n=t[e].op,i=0,o=this.listeners[n].length;i<o;i++){var s=this.listeners[n][i],a=this.checkPatch(t[e],s);a&&(s.callback.apply(s,a.concat([t[e].value])),r=!0)}if(!r&&this.listeners[""])for(var u=0,f=this.listeners[""].length;u<f;u++)this.listeners[""][u].callback(t[e].path,t[e].op,t[e].value)}},t.prototype.checkPatch=function(t,e){if(t.path.length!==e.rules.length)return!1;for(var r=[],n=0,i=e.rules.length;n<i;n++){var o=t.path[n].match(e.rules[n]);if(!o||0===o.length||o.length>2)return!1;r=r.concat(o.slice(1))}return r},t.prototype.reset=function(){this.listeners={"":[],add:[],remove:[],replace:[]}},t}();e.DeltaContainer=i},function(t,e){"use strict";function r(t,e){var r=[];return o(t,e,r,[]),r}function n(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function i(t){if(Array.isArray(t)){for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=""+r;return e}if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function o(t,e,r,s){for(var a=i(e),u=i(t),f=!1,c=!1,h=u.length-1;h>=0;h--){var l=u[h],p=t[l];if(!e.hasOwnProperty(l)||void 0===e[l]&&void 0!==p&&Array.isArray(e)===!1)r.push({op:"remove",path:s.concat(l)}),c=!0;else{var y=e[l];"object"==typeof p&&null!=p&&"object"==typeof y&&null!=y?o(p,y,r,s.concat(l)):p!==y&&(f=!0,r.push({op:"replace",path:s.concat(l),value:n(y)}))}}if(c||a.length!=u.length)for(var h=0;h<a.length;h++){var l=a[h];t.hasOwnProperty(l)||void 0===e[l]||r.push({op:"add",path:s.concat(l),value:n(e[l])})}}e.compare=r},function(t,e,r){"use strict";var n=r(40);e.DeltaContainer=n.DeltaContainer},function(t,e){!function(e,r){"undefined"!=typeof t&&t.exports?t.exports=r():e.fossilDelta=r()}(this,function(){"use strict";function t(){this.a=0,this.b=0,this.i=0,this.z=new Array(s)}function e(t){this.a=t,this.pos=0}function r(){this.a=[]}function n(t){var e,r;for(e=1,r=64;t>=r;e++,r<<=6);return e}function i(t){for(var e=0,r=0,n=0,i=0,o=0,s=t.length;s>=16;)e=e+t[o+0]|0,r=r+t[o+1]|0,n=n+t[o+2]|0,i=i+t[o+3]|0,e=e+t[o+4]|0,r=r+t[o+5]|0,n=n+t[o+6]|0,i=i+t[o+7]|0,e=e+t[o+8]|0,r=r+t[o+9]|0,n=n+t[o+10]|0,i=i+t[o+11]|0,e=e+t[o+12]|0,r=r+t[o+13]|0,n=n+t[o+14]|0,i=i+t[o+15]|0,o+=16,s-=16;for(;s>=4;)e=e+t[o+0]|0,r=r+t[o+1]|0,n=n+t[o+2]|0,i=i+t[o+3]|0,o+=4,s-=4;switch(i=((i+(n<<8)|0)+(r<<16)|0)+(e<<24)|0,s){case 3:i=i+(t[o+2]<<8)|0;case 2:i=i+(t[o+1]<<16)|0;case 1:i=i+(t[o+0]<<24)|0}return i>>>0}var o={},s=16;t.prototype.init=function(t,e){var r,n,i=0,o=0;for(r=0;r<s;r++)n=t[e+r],i=i+n&65535,o=o+(s-r)*n&65535,this.z[r]=n;this.a=65535&i,this.b=65535&o,this.i=0},t.prototype.next=function(t){var e=this.z[this.i];this.z[this.i]=t,this.i=this.i+1&s-1,this.a=this.a-e+t&65535,this.b=this.b-s*e+this.a&65535},t.prototype.value=function(){return(65535&this.a|(65535&this.b)<<16)>>>0};var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~".split("").map(function(t){return t.charCodeAt(0)}),u=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,36,-1,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,-1,-1,-1,63,-1];return e.prototype.haveBytes=function(){return this.pos<this.a.length},e.prototype.getByte=function(){var t=this.a[this.pos];if(this.pos++,this.pos>this.a.length)throw new RangeError("out of bounds");return t},e.prototype.getChar=function(){return String.fromCharCode(this.getByte())},e.prototype.getInt=function(){for(var t,e=0;this.haveBytes()&&(t=u[127&this.getByte()])>=0;)e=(e<<6)+t;return this.pos--,e>>>0},r.prototype.toArray=function(){return this.a},r.prototype.putByte=function(t){this.a.push(255&t)},r.prototype.putChar=function(t){this.putByte(t.charCodeAt(0))},r.prototype.putInt=function(t){var e,r,n=[];if(0===t)return void this.putChar("0");for(e=0;t>0;e++,t>>>=6)n.push(a[63&t]);for(r=e-1;r>=0;r--)this.putByte(n[r])},r.prototype.putArray=function(t,e,r){for(var n=e;n<r;n++)this.a.push(t[n])},o.create=function(e,o){var a,u=new r,f=o.length,c=e.length,h=-1;if(u.putInt(f),u.putChar("\n"),c<=s)return u.putInt(f),u.putChar(":"),u.putArray(o,0,f),u.putInt(i(o)),u.putChar(";"),u.toArray();var l=Math.ceil(c/s),p=new Array(l),y=new Array(l);for(a=0;a<p.length;a++)p[a]=-1;for(a=0;a<y.length;a++)y[a]=-1;var d,v=new t;for(a=0;a<c-s;a+=s)v.init(e,a),d=v.value()%l,p[a/s]=y[d],y[d]=a/s;for(var g,b,m,w,E,_=0;_+s<f;)for(w=0,E=0,v.init(o,_),a=0,m=0;;){var A=250;for(d=v.value()%l,b=y[d];b>=0&&A-- >0;){var x,k,S,P,B,O,R,I;for(g=b*s,P=0,O=g,R=_+a;O<c&&R<f&&e[O]===o[R];P++,O++,R++);for(P--,B=1;B<g&&B<=a&&e[g-B]===o[_+a-B];B++);B--,k=g-B,x=P+B+1,S=a-B,I=n(a-B)+n(x)+n(k)+3,x>=I&&x>m&&(m=x,w=g-B,E=S),b=p[b]}if(m>0){E>0&&(u.putInt(E),u.putChar(":"),u.putArray(o,_,_+E),_+=E),_+=m,u.putInt(m),u.putChar("@"),u.putInt(w),u.putChar(","),w+m-1>h&&(h=w+m-1),m=0;break}if(_+a+s>=f){u.putInt(f-_),u.putChar(":"),u.putArray(o,_,_+f-_),_=f;break}v.next(o[_+a+s]),a++}return _<f&&(u.putInt(f-_),u.putChar(":"),u.putArray(o,_,_+f-_)),u.putInt(i(o)),u.putChar(";"),u.toArray()},o.outputSize=function(t){var r=new e(t),n=r.getInt();if("\n"!==r.getChar())throw new Error("size integer not terminated by '\\n'");return n},o.apply=function(t,n){var o,s=0,a=new e(n),u=t.length,f=n.length;if(o=a.getInt(),"\n"!==a.getChar())throw new Error("size integer not terminated by '\\n'");for(var c=new r;a.haveBytes();){var h,l;switch(h=a.getInt(),a.getChar()){case"@":if(l=a.getInt(),a.haveBytes()&&","!==a.getChar())throw new Error("copy command not terminated by ','");if(s+=h,s>o)throw new Error("copy exceeds output file size");if(l+h>u)throw new Error("copy extends past end of input");c.putArray(t,l,l+h);break;case":":if(s+=h,s>o)throw new Error("insert command gives an output larger than predicted");if(h>f)throw new Error("insert count exceeds size of delta");c.putArray(a.a,a.pos,a.pos+h),a.pos+=h;break;case";":var p=c.toArray();if(h!==i(p))throw new Error("bad checksum");if(s!==o)throw new Error("generated size does not match predicted size");return p;default:throw new Error("unknown delta operator")}}throw new Error("unterminated delta")},o})},function(t,e,r){(function(e){function r(t){return t&&t.isBuffer&&t}t.exports=r("undefined"!=typeof e&&e)||r(this.Buffer)||r("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(e,r(6).Buffer)},function(t,e){function r(t,e){for(var r=this,n=e||(e|=0),i=t.length,o=0,s=0;s<i;)o=t.charCodeAt(s++),o<128?r[n++]=o:o<2048?(r[n++]=192|o>>>6,r[n++]=128|63&o):o<55296||o>57343?(r[n++]=224|o>>>12,r[n++]=128|o>>>6&63,r[n++]=128|63&o):(o=(o-55296<<10|t.charCodeAt(s++)-56320)+65536,r[n++]=240|o>>>18,r[n++]=128|o>>>12&63,r[n++]=128|o>>>6&63,r[n++]=128|63&o);return n-e}function n(t,e,r){var n=this,i=0|e;r||(r=n.length);for(var o="",s=0;i<r;)s=n[i++],s<128?o+=String.fromCharCode(s):(192===(224&s)?s=(31&s)<<6|63&n[i++]:224===(240&s)?s=(15&s)<<12|(63&n[i++])<<6|63&n[i++]:240===(248&s)&&(s=(7&s)<<18|(63&n[i++])<<12|(63&n[i++])<<6|63&n[i++]),s>=65536?(s-=65536,o+=String.fromCharCode((s>>>10)+55296,(1023&s)+56320)):o+=String.fromCharCode(s));return o}function i(t,e,r,n){var i;r||(r=0),n||0===n||(n=this.length),e||(e=0);var o=n-r;if(t===this&&r<e&&e<n)for(i=o-1;i>=0;i--)t[i+e]=this[i+r];else for(i=0;i<o;i++)t[i+e]=this[i+r];return o}e.copy=i,e.toString=n,e.write=r},function(t,e,r){function n(t){return new Array(t)}function i(t){if(!o.isBuffer(t)&&o.isView(t))t=o.Uint8Array.from(t);else if(o.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return o.from.call(e,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(t)}var o=r(0),e=t.exports=n(0);e.alloc=n,e.concat=o.concat,e.from=i},function(t,e,r){function n(t){return new s(t)}function i(t){if(!o.isBuffer(t)&&o.isView(t))t=o.Uint8Array.from(t);else if(o.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return o.from.call(e,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return s.from&&1!==s.from.length?s.from(t):new s(t)}var o=r(0),s=o.global,e=t.exports=o.hasBuffer?n(0):[];e.alloc=o.hasBuffer&&s.alloc||n,e.concat=o.concat,e.from=i},function(t,e,r){function n(t){return new Uint8Array(t)}function i(t){if(o.isView(t)){var r=t.byteOffset,n=t.byteLength;t=t.buffer,t.byteLength!==n&&(t.slice?t=t.slice(r,r+n):(t=new Uint8Array(t),t.byteLength!==n&&(t=Array.prototype.slice.call(t,r,r+n))))}else{if("string"==typeof t)return o.from.call(e,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(t)}var o=r(0),e=t.exports=o.hasArrayBuffer?n(0):[];e.alloc=n,e.concat=o.concat,e.from=i},function(t,e,r){r(12),r(13),e.codec={preset:r(3).preset}},function(t,e,r){function n(t){return this instanceof n?void o.call(this,t):new n(t)}e.Decoder=n;var i=r(20),o=r(22).DecodeBuffer;n.prototype=new o,i.mixin(n.prototype),n.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},n.prototype.push=function(t){this.emit("data",t)},n.prototype.end=function(t){this.decode(t),this.emit("end")}},function(t,e,r){function n(t){return this instanceof n?void o.call(this,t):new n(t)}e.Encoder=n;var i=r(20),o=r(24).EncodeBuffer;n.prototype=new o,i.mixin(n.prototype),n.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},n.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},function(t,e,r){function n(t){t.addExtPacker(14,Error,[a,i]),t.addExtPacker(1,EvalError,[a,i]),t.addExtPacker(2,RangeError,[a,i]),t.addExtPacker(3,ReferenceError,[a,i]),t.addExtPacker(4,SyntaxError,[a,i]),t.addExtPacker(5,TypeError,[a,i]),t.addExtPacker(6,URIError,[a,i]),t.addExtPacker(10,RegExp,[s,i]),t.addExtPacker(11,Boolean,[o,i]),t.addExtPacker(12,String,[o,i]),t.addExtPacker(13,Date,[Number,i]),t.addExtPacker(15,Number,[o,i]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,h),t.addExtPacker(18,Uint8Array,h),t.addExtPacker(19,Int16Array,h),t.addExtPacker(20,Uint16Array,h),t.addExtPacker(21,Int32Array,h),t.addExtPacker(22,Uint32Array,h),t.addExtPacker(23,Float32Array,h),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,h),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,h),t.addExtPacker(26,ArrayBuffer,h),t.addExtPacker(29,DataView,h)),f.hasBuffer&&t.addExtPacker(27,c,f.from)}function i(t){return u||(u=r(25).encode),u(t)}function o(t){return t.valueOf()}function s(t){t=RegExp.prototype.toString.call(t).split("/"),t.shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function a(t){var e={};for(var r in l)e[r]=t[r];return e}e.setExtPackers=n;var u,f=r(0),c=f.global,h=f.Uint8Array.from,l={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},function(t,e,r){function n(t){t.addExtUnpacker(14,[i,s(Error)]),t.addExtUnpacker(1,[i,s(EvalError)]),t.addExtUnpacker(2,[i,s(RangeError)]),t.addExtUnpacker(3,[i,s(ReferenceError)]),t.addExtUnpacker(4,[i,s(SyntaxError)]),t.addExtUnpacker(5,[i,s(TypeError)]),t.addExtUnpacker(6,[i,s(URIError)]),t.addExtUnpacker(10,[i,o]),t.addExtUnpacker(11,[i,a(Boolean)]),t.addExtUnpacker(12,[i,a(String)]),t.addExtUnpacker(13,[i,a(Date)]),t.addExtUnpacker(15,[i,a(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,a(Int8Array)),t.addExtUnpacker(18,a(Uint8Array)),t.addExtUnpacker(19,[u,a(Int16Array)]),t.addExtUnpacker(20,[u,a(Uint16Array)]),t.addExtUnpacker(21,[u,a(Int32Array)]),t.addExtUnpacker(22,[u,a(Uint32Array)]),t.addExtUnpacker(23,[u,a(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[u,a(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,a(Uint8ClampedArray)),t.addExtUnpacker(26,u),t.addExtUnpacker(29,[u,a(DataView)])),c.hasBuffer&&t.addExtUnpacker(27,a(h))}function i(t){return f||(f=r(23).decode),f(t)}function o(t){return RegExp.apply(null,t)}function s(t){return function(e){var r=new t;for(var n in l)r[n]=e[n];return r}}function a(t){return function(e){return new t(e)}}function u(t){return new Uint8Array(t).buffer}e.setExtUnpackers=n;var f,c=r(0),h=c.global,l={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},function(t,e,r){r(12),r(13),e.createCodec=r(3).createCodec},function(t,e,r){function n(t){var e=f.getReadFormat(t);return t&&t.useraw?o(e):i(e)}function i(t){var e,r=new Array(256);for(e=0;e<=127;e++)r[e]=s(e);for(e=128;e<=143;e++)r[e]=u(e-128,t.map);for(e=144;e<=159;e++)r[e]=u(e-144,t.array);for(e=160;e<=191;e++)r[e]=u(e-160,t.str);for(r[192]=s(null),r[193]=null,r[194]=s(!1),r[195]=s(!0),r[196]=a(t.uint8,t.bin),r[197]=a(t.uint16,t.bin),r[198]=a(t.uint32,t.bin),r[199]=a(t.uint8,t.ext),r[200]=a(t.uint16,t.ext),r[201]=a(t.uint32,t.ext),r[202]=t.float32,r[203]=t.float64,r[204]=t.uint8,r[205]=t.uint16,r[206]=t.uint32,r[207]=t.uint64,r[208]=t.int8,r[209]=t.int16,r[210]=t.int32,r[211]=t.int64,r[212]=u(1,t.ext),r[213]=u(2,t.ext),r[214]=u(4,t.ext),r[215]=u(8,t.ext),r[216]=u(16,t.ext),r[217]=a(t.uint8,t.str),r[218]=a(t.uint16,t.str),r[219]=a(t.uint32,t.str),r[220]=a(t.uint16,t.array),r[221]=a(t.uint32,t.array),r[222]=a(t.uint16,t.map),r[223]=a(t.uint32,t.map),e=224;e<=255;e++)r[e]=s(e-256);return r}function o(t){var e,r=i(t).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],e=160;e<=191;e++)r[e]=u(e-160,t.bin);return r}function s(t){return function(){return t}}function a(t,e){return function(r){var n=t(r);return e(r,n)}}function u(t,e){return function(r){return e(r,t)}}var f=r(27);e.getReadToken=n},function(t,e,r){function n(t){return t&&t.uint8array?i():A||w.hasBuffer&&t&&t.safe?s():o()}function i(){var t=o();return t[202]=c(202,4,p),t[203]=c(203,8,y),t}function o(){var t=m.slice();return t[196]=a(196),t[197]=u(197),t[198]=f(198),t[199]=a(199),t[200]=u(200),t[201]=f(201),t[202]=c(202,4,x.writeFloatBE||p,!0),t[203]=c(203,8,x.writeDoubleBE||y,!0),t[204]=a(204),t[205]=u(205),t[206]=f(206),t[207]=c(207,8,h),t[208]=a(208),t[209]=u(209),t[210]=f(210),t[211]=c(211,8,l),t[217]=a(217),t[218]=u(218),t[219]=f(219),t[220]=u(220),t[221]=f(221),t[222]=u(222),t[223]=f(223),t}function s(){var t=m.slice();return t[196]=c(196,1,E.prototype.writeUInt8),t[197]=c(197,2,E.prototype.writeUInt16BE),t[198]=c(198,4,E.prototype.writeUInt32BE),t[199]=c(199,1,E.prototype.writeUInt8),t[200]=c(200,2,E.prototype.writeUInt16BE),t[201]=c(201,4,E.prototype.writeUInt32BE),t[202]=c(202,4,E.prototype.writeFloatBE),t[203]=c(203,8,E.prototype.writeDoubleBE),t[204]=c(204,1,E.prototype.writeUInt8),t[205]=c(205,2,E.prototype.writeUInt16BE),t[206]=c(206,4,E.prototype.writeUInt32BE),t[207]=c(207,8,h),t[208]=c(208,1,E.prototype.writeInt8),t[209]=c(209,2,E.prototype.writeInt16BE),t[210]=c(210,4,E.prototype.writeInt32BE),t[211]=c(211,8,l),t[217]=c(217,1,E.prototype.writeUInt8),t[218]=c(218,2,E.prototype.writeUInt16BE),t[219]=c(219,4,E.prototype.writeUInt32BE),t[220]=c(220,2,E.prototype.writeUInt16BE),t[221]=c(221,4,E.prototype.writeUInt32BE),t[222]=c(222,2,E.prototype.writeUInt16BE),t[223]=c(223,4,E.prototype.writeUInt32BE),t}function a(t){return function(e,r){var n=e.reserve(2),i=e.buffer;i[n++]=t,i[n]=r}}function u(t){return function(e,r){var n=e.reserve(3),i=e.buffer;i[n++]=t,i[n++]=r>>>8,i[n]=r}}function f(t){return function(e,r){var n=e.reserve(5),i=e.buffer;i[n++]=t,i[n++]=r>>>24,i[n++]=r>>>16,i[n++]=r>>>8,i[n]=r}}function c(t,e,r,n){return function(i,o){var s=i.reserve(e+1);i.buffer[s++]=t,r.call(i.buffer,o,s,n)}}function h(t,e){new g(this,e,t)}function l(t,e){new b(this,e,t)}function p(t,e){d.write(this,t,e,!1,23,4)}function y(t,e){d.write(this,t,e,!1,52,8)}var d=r(8),v=r(9),g=v.Uint64BE,b=v.Int64BE,m=r(28).uint8,w=r(0),E=w.global,_=w.hasBuffer&&"TYPED_ARRAY_SUPPORT"in E,A=_&&!E.TYPED_ARRAY_SUPPORT,x=w.hasBuffer&&E.prototype||{};e.getWriteToken=n},function(t,e,r){function n(t){function e(t,e){var r=e?195:194;O[r](t,e)}function r(t,e){var r,n=0|e;return e!==n?(r=203,void O[r](t,e)):(r=-32<=n&&n<=127?255&n:0<=n?n<=255?204:n<=65535?205:206:-128<=n?208:-32768<=n?209:210,void O[r](t,n))}function n(t,e){var r=207;O[r](t,e.toArray())}function o(t,e){var r=211;O[r](t,e.toArray())}function v(t){return t<32?1:t<=255?2:t<=65535?3:5}function g(t){return t<32?1:t<=65535?3:5}function b(t){function e(e,r){var n=r.length,i=5+3*n;e.offset=e.reserve(i);var o=e.buffer,s=t(n),a=e.offset+s;n=f.write.call(o,r,a);var u=t(n);if(s!==u){var c=a+u-s,h=a+n;f.copy.call(o,o,c,a,h)}var l=1===u?160+n:u<=3?215+u:219;O[l](e,n),e.offset+=n}return e}function m(t,e){if(null===e)return E(t,e);if(T(e))return C(t,e);if(i(e))return _(t,e);if(s.isUint64BE(e))return n(t,e);if(a.isInt64BE(e))return o(t,e);var r=t.codec.getExtPacker(e);return r&&(e=r(e)),e instanceof l?k(t,e):void D(t,e)}function w(t,e){return T(e)?B(t,e):void m(t,e)}function E(t,e){var r=192;O[r](t,e)}function _(t,e){var r=e.length,n=r<16?144+r:r<=65535?220:221;O[n](t,r);for(var i=t.codec.encode,o=0;o<r;o++)i(t,e[o])}function A(t,e){var r=e.length,n=r<255?196:r<=65535?197:198;O[n](t,r),t.send(e)}function x(t,e){A(t,new Uint8Array(e))}function k(t,e){var r=e.buffer,n=r.length,i=d[n]||(n<255?199:n<=65535?200:201);O[i](t,n),h[e.type](t),t.send(r)}function S(t,e){var r=Object.keys(e),n=r.length,i=n<16?128+n:n<=65535?222:223;O[i](t,n);var o=t.codec.encode;r.forEach(function(r){o(t,r),o(t,e[r])})}function P(t,e){if(!(e instanceof Map))return S(t,e);var r=e.size,n=r<16?128+r:r<=65535?222:223;O[n](t,r);var i=t.codec.encode;e.forEach(function(e,r,n){i(t,r),i(t,e)})}function B(t,e){var r=e.length,n=r<32?160+r:r<=65535?218:219;O[n](t,r),t.send(e)}var O=c.getWriteToken(t),R=t&&t.useraw,I=p&&t&&t.binarraybuffer,T=I?u.isArrayBuffer:u.isBuffer,C=I?x:A,U=y&&t&&t.usemap,D=U?P:S,L={boolean:e,function:E,number:r,object:R?w:m,string:b(R?g:v),symbol:E,undefined:E};return L}var i=r(2),o=r(9),s=o.Uint64BE,a=o.Int64BE,u=r(0),f=r(10),c=r(56),h=r(28).uint8,l=r(11).ExtBuffer,p="undefined"!=typeof Uint8Array,y="undefined"!=typeof Map,d=[];d[1]=212,d[2]=213,d[4]=214,d[8]=215,d[16]=216,e.getWriteType=n},function(t,e,r){function n(t,e,r,n){r=r||"";var i=u.format.apply(this,[r].concat(n)),o=new t(i);throw Error.captureStackTrace(o,e),o}function i(t,e,r){n(f.IllegalArgumentError,t,e,r)}function o(t,e,r){n(f.IllegalStateError,t,e,r)}function s(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array"}return e}function a(t){return function(e,r){var n=s(e);return n==t?e:void i(arguments.callee,r||'Expected "'+t+'" but got "'+n+'".',Array.prototype.slice.call(arguments,2))}}var u=r(1),f=t.exports=r(59);t.exports.checkArgument=function(t,e){t||i(arguments.callee,e,Array.prototype.slice.call(arguments,2))},t.exports.checkState=function(t,e){t||o(arguments.callee,e,Array.prototype.slice.call(arguments,2))},t.exports.checkIsDef=function(t,e){return void 0!==t?t:void i(arguments.callee,e||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},t.exports.checkIsDefAndNotNull=function(t,e){return null!=t?t:void i(arguments.callee,e||'Expected value to be defined and not null but got "'+s(t)+'".',Array.prototype.slice.call(arguments,2))},t.exports.checkIsString=a("string"),t.exports.checkIsArray=a("array"),t.exports.checkIsNumber=a("number"),t.exports.checkIsBoolean=a("boolean"),t.exports.checkIsFunction=a("function"),t.exports.checkIsObject=a("object")},function(t,e,r){function n(t){Error.call(this,t),this.message=t}function i(t){Error.call(this,t),this.message=t}var o=r(1);o.inherits(n,Error),n.prototype.name="IllegalArgumentError",o.inherits(i,Error),i.prototype.name="IllegalStateError",t.exports.IllegalStateError=i,t.exports.IllegalArgumentError=n},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){d&&p&&(d=!1,p.length?y=p.concat(y):v=-1,y.length&&a())}function a(){if(!d){var t=i(s);d=!0;for(var e=y.length;e;){for(p=y,y=[];++v<e;)p&&p[v].run();v=-1,e=y.length}p=null,d=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function f(){}var c,h,l=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(t){h=n}}();var p,y=[],d=!1,v=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];y.push(new u(t,e)),1!==y.length||d||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=f,l.addListener=f,l.once=f,l.off=f,l.removeListener=f,l.removeAllListeners=f,l.emit=f,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(30),o=function(t){function e(e){void 0===e&&(e=null);for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i;return r=1==r.length&&r[0]instanceof Array?r[0]:r,i=t.call(this,r)||this,i._target=e,i}return n(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){t!=this._target&&(this.removeAll(),this._target=t)},enumerable:!0,configurable:!0}),e.prototype.dispatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this._valueClasses.length,n=t.length;if(n<r)throw new Error("Incorrect number of arguments. Expected at least "+r+" but received "+n+".");for(var i=0;i<r;i++)if(null!==t[i]&&t[i].constructor!==this._valueClasses[i])throw new Error("Value object <"+t[i]+"> is not an instance of <"+this._valueClasses[i]+">.");var o=t[0];o&&(o.target&&(o=o.clone(),t[0]=o),o.target=this.target,o.currentTarget=this.target,o.signal=this);for(var s=this.slots;s.nonEmpty;)s.head.execute(t),s=s.tail;if(o&&o.bubbles)for(var a=this.target;a&&a.hasOwnProperty("parent")&&(a=a.parent)&&(void 0===a.onEventBubbled||(o.currentTarget=a,!a.onEventBubbled(o))););},e}(i.PrioritySignal);e.DeluxeSignal=o},function(t,e){"use strict";e.IOnceSignal=Symbol("IOnceSignal")},function(t,e){"use strict";e.IPrioritySignal=Symbol("IPrioritySignal")},function(t,e){"use strict";e.ISignal=Symbol("ISignal")},function(t,e){"use strict";e.ISlot=Symbol("ISlot")},function(t,e,r){"use strict";var n=r(4),i=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.valueClasses=1==t.length&&t[0]instanceof Array?t[0]:t}return Object.defineProperty(t.prototype,"valueClasses",{get:function(){return this._valueClasses},set:function(t){this._valueClasses=t?t.slice():[];for(var e=this._valueClasses.length;e--;)if(!(this._valueClasses[e]instanceof Object))throw new Error("Invalid valueClasses argument: item at index "+e+" should be a Class but was:<"+this._valueClasses[e]+">."+this._valueClasses[e])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numListeners",{get:function(){return this.slot?1:0},enumerable:!0,configurable:!0}),t.prototype.add=function(t){return this.registerListener(t)},t.prototype.addOnce=function(t){return this.registerListener(t,!0)},t.prototype.remove=function(t){if(this.slot&&this.slot.listener==t){var e=this.slot;return this.slot=null,e}return null},t.prototype.removeAll=function(){this.slot&&this.slot.remove()},t.prototype.dispatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this._valueClasses.length,n=t.length;if(n<r)throw new Error("Incorrect number of arguments. Expected at least "+r+" but received "+n+".");for(var i=0;i<r;i++)if(!(null===t[i]||t[i]instanceof this._valueClasses[i]||t[i].constructor===this._valueClasses[i]))throw new Error("Value object <"+t[i]+"> is not an instance of <"+this._valueClasses[i]+">.");this.slot&&this.slot.execute(t)},t.prototype.registerListener=function(t,e){if(void 0===e&&(e=!1),this.slot)throw new Error("You cannot add or addOnce with a listener already added, remove the current listener first.");return this.slot=new n.Slot(t,this,e)},t}();e.MonoSignal=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(15),o=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.addOnce=function(e){var r=t.prototype.addOnce.call(this,e);return this.isDispatched&&(r.execute(this.valueObjects),r.remove()),r},e.prototype.dispatch=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(this.isDispatched)throw new Error("You cannot dispatch() a Promise more than once");this.isDispatched=!0,this.valueObjects=e,t.prototype.dispatch.apply(this,e)},e}(i.OnceSignal);e.Promise=o},function(t,e){"use strict";var r=function(){function t(t){void 0===t&&(t=!1),this._bubbles=t}return Object.defineProperty(t.prototype,"signal",{get:function(){return this._signal},set:function(t){this._signal=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTarget",{get:function(){return this._currentTarget},set:function(t){this._currentTarget=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bubbles",{get:function(){return this._bubbles},set:function(t){this._bubbles=t},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this._bubbles)},t}();e.GenericEvent=r},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(35),s=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t),this.url=e,this._protocols=r,this.reconnectEnabled=!0,this.listeners={},this.backoff=o[i.backoff||"fibonacci"](i),this.backoff.on("backoff",this.onBackoffStart.bind(this)),this.backoff.on("ready",this.onBackoffReady.bind(this)),this.backoff.on("fail",this.onBackoffFail.bind(this)),this.open()}return i(t,[{key:"open",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isReconnect=t,this.ws=new WebSocket(this.url,this._protocols),this.ws.onclose=this.onCloseCallback.bind(this),this.ws.onerror=this.onErrorCallback.bind(this),this.ws.onmessage=this.onMessageCallback.bind(this),this.ws.onopen=this.onOpenCallback.bind(this)}},{key:"onBackoffStart",value:function(t,e){}},{key:"onBackoffReady",value:function(t,e){this.open(!0)}},{key:"onBackoffFail",value:function(){}},{key:"onCloseCallback",value:function(){!this.isReconnect&&this.listeners.onclose&&this.listeners.onclose.apply(null,arguments),this.reconnectEnabled&&this.backoff.backoff()}},{key:"onErrorCallback",value:function(){this.listeners.onerror&&this.listeners.onerror.apply(null,arguments)}},{key:"onMessageCallback",value:function(){this.listeners.onmessage&&this.listeners.onmessage.apply(null,arguments)}},{key:"onOpenCallback",value:function(){this.listeners.onopen&&this.listeners.onopen.apply(null,arguments),this.isReconnect&&this.listeners.onreconnect&&this.listeners.onreconnect.apply(null,arguments),this.isReconnect=!1}},{key:"close",value:function(t,e){"undefined"==typeof t&&(t=1e3),this.reconnectEnabled=!1,this.ws.close(t,e)}},{key:"send",value:function(t){this.ws.send(t)}},{key:"bufferedAmount",get:function(){return this.ws.bufferedAmount}},{key:"readyState",get:function(){return this.ws.readyState}},{key:"binaryType",get:function(){return this.ws.binaryType},set:function(t){this.ws.binaryType=t}},{key:"extensions",get:function(){return this.ws.extensions},set:function(t){this.ws.extensions=t}},{key:"protocol",get:function(){return this.ws.protocol},set:function(t){this.ws.protocol=t}},{key:"onclose",set:function(t){this.listeners.onclose=t},get:function(){return this.listeners.onclose}},{key:"onerror",set:function(t){this.listeners.onerror=t},get:function(){return this.listeners.onerror}},{key:"onmessage",set:function(t){this.listeners.onmessage=t},get:function(){return this.listeners.onmessage}},{key:"onopen",set:function(t){this.listeners.onopen=t},get:function(){return this.listeners.onopen}},{key:"onreconnect",set:function(t){this.listeners.onreconnect=t},get:function(){return this.listeners.onreconnect}}]),t}();s.CONNECTING=WebSocket.CONNECTING,s.OPEN=WebSocket.OPEN,s.CLOSING=WebSocket.CLOSING,s.CLOSED=WebSocket.CLOSED,e.default=s},function(t,e,r){"use strict";var n=r(34);e.Client=n.Client;var i=r(5);e.Protocol=i.Protocol;var o=r(16);e.Room=o.Room}]);